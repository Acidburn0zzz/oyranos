# --- meta modules ---
SET( OY_MODULE oyIM )
SET( MODULE_EXTRA_LIBS ${EXTRA_LIBS} )
SET( OY_MODULE_LIB ${PACKAGE_NAME}_${OY_MODULE}${OY_MODULE_NAME} )
ADD_LIBRARY( ${OY_MODULE_LIB}
             SHARED
             ${PACKAGE_NAME}_cmm_${OY_MODULE}.c
             ${PACKAGE_NAME}_cmm_${OY_MODULE}_meta_c.c
             ${PACKAGE_NAME}_cmm_${OY_MODULE}_profile.c)
#SET( EXTRA_LIBS ${EXTRA_LIBS} ${YAJL_LIBRARIES} )
TARGET_LINK_LIBRARIES ( ${OY_MODULE_LIB} ${PROJECT_NAME} ${MODULE_EXTRA_LIBS} )
INSTALL (TARGETS ${OY_MODULE_LIB} DESTINATION ${CMAKE_INSTALL_LIBDIR}/${OY_METASUBPATH})
IF(ENABLE_STATIC_LIBS)
    ADD_LIBRARY( ${OY_MODULE_LIB}-static
                 STATIC
                 ${PACKAGE_NAME}_cmm_${OY_MODULE}.c
                 ${PACKAGE_NAME}_cmm_${OY_MODULE}_meta_c.c
                 ${PACKAGE_NAME}_cmm_${OY_MODULE}_profile.c)
	 TARGET_LINK_LIBRARIES ( ${OY_MODULE_LIB}-static ${PACKAGE_NAME}-static ${MODULE_EXTRA_LIBS} )
    SET( OY_MODULE_STATIC ${OY_MODULE_STATIC} ${OY_MODULE_LIB}-static )
ENDIF(ENABLE_STATIC_LIBS)

SET( OY_MODULE_STATIC ${OY_MODULE_STATIC} PARENT_SCOPE )
